---
layout: default
---

{% assign all_projects = site.projects | sort: "date" | reverse %}
{% assign subcategories = all_projects | map: "subcategory" | uniq | sort %}
{% assign work_types    = all_projects | map: "type"        | uniq | sort %}

<div class="category-page">

  <div class="category-header">
    <div class="category-header__inner">
      <h1 class="category-header__title">{{ page.title | default: "Work" }}</h1>
      <div class="category-filters">

        <div class="filter-row">
          <span class="filter-row__label">Category</span>
          <div class="filter-pills">
            <button class="filter-pill active" data-filter="all"      data-group="category">All</button>
            <button class="filter-pill"        data-filter="designer" data-group="category">Designer</button>
            <button class="filter-pill"        data-filter="thinker"  data-group="category">Thinker</button>
            <button class="filter-pill"        data-filter="catalyst" data-group="category">Catalyst</button>
          </div>
        </div>

        <div class="filter-row">
          <span class="filter-row__label">Type</span>
          <div class="filter-pills">
            <button class="filter-pill active" data-filter="all" data-group="subcat">All</button>
            {% for s in subcategories %}{% if s and s != "" %}
            <button class="filter-pill" data-filter="{{ s }}" data-group="subcat">{{ s | replace: "-", " " | capitalize }}</button>
            {% endif %}{% endfor %}
          </div>
        </div>

        <div class="filter-row">
          <span class="filter-row__label">Context</span>
          <div class="filter-pills">
            <button class="filter-pill active" data-filter="all" data-group="type">All</button>
            {% for t in work_types %}{% if t and t != "" %}
            <button class="filter-pill" data-filter="{{ t }}" data-group="type">{{ t | replace: "-", " " | capitalize }}</button>
            {% endif %}{% endfor %}
          </div>
          <span class="project-count"><span id="visible-count">{{ all_projects | size }}</span> projects</span>
        </div>

      </div>
    </div>
  </div>

  <div class="projects-list-wrap">
    <div class="projects-grid" id="projects-list">
      {% for project in all_projects %}
      <article class="grid-card"
        data-category="{{ project.category }}"
        data-subcat="{{ project.subcategory }}"
        data-type="{{ project.type }}">
        <div class="grid-card__thumb">
          <a href="{{ project.url }}">
            {% if project.thumbnail %}
            <img src="{{ project.thumbnail }}" alt="{{ project.title }}" loading="lazy">
            {% else %}
            <span class="grid-card__placeholder grid-card__placeholder--{{ project.category }}">{{ project.subcategory | upcase | truncate: 4, "" }}</span>
            {% endif %}
          </a>
        </div>
        <div class="grid-card__info">
          <a href="{{ project.url }}" class="grid-card__title">{{ project.title }}</a>
          <div class="grid-card__meta">
            <span>{{ project.category | capitalize }}</span>
            <span>{{ project.date | date: "%Y" }}{% if project.end_date %}â€“{{ project.end_date | date: "%Y" }}{% endif %}</span>
          </div>
        </div>
      </article>
      {% endfor %}
    </div>
  </div>

</div>

<script>
(function () {
  var cards = Array.from(document.querySelectorAll('.grid-card'));
  var countEl = document.getElementById('visible-count');
  var active = { category: 'all', subcat: 'all', type: 'all' };

  function applyFilters() {
    var n = 0;
    cards.forEach(function (c) {
      var show = (active.category === 'all' || c.dataset.category === active.category)
              && (active.subcat   === 'all' || c.dataset.subcat    === active.subcat)
              && (active.type     === 'all' || c.dataset.type      === active.type);
      c.style.display = show ? '' : 'none';
      if (show) n++;
    });
    if (countEl) countEl.textContent = n;
  }

  document.querySelectorAll('.filter-pill').forEach(function (pill) {
    pill.addEventListener('click', function () {
      var group = pill.dataset.group;
      document.querySelectorAll('[data-group="' + group + '"]').forEach(function (p) { p.classList.remove('active'); });
      pill.classList.add('active');
      active[group] = pill.dataset.filter;
      applyFilters();
    });
  });
}());
</script>
