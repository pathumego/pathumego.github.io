---
layout: default
hide_nav: true
---

<div class="homepage">
  <div class="pe-text" id="pe-text">peපැபெ</div>

  <div class="bio">
    <p class="bio-text">
      Pathum Egodawatta is an interdisciplinary designer,<br>
      thinker, and catalyst working at the intersections of<br>
      type, text, design, code, and culture. <button class="bio-trigger" id="bio-toggle" aria-expanded="false">෴</button>
    </p>
    <div class="bio-more" id="bio-more" style="display:none"></div>
  </div>

  <nav class="category-nav" id="bio-nav" style="display:none">
    <a href="/work" class="category-nav__link">View all work →</a>
  </nav>
</div>

{% assign all_projects = site.projects | sort: "date" | reverse %}

<div class="homepage-projects">
  <p class="homepage-projects__heading">Selected work</p>
  <div class="projects-grid">
    {% for project in all_projects %}
    <article class="grid-card">
      <div class="grid-card__thumb">
        <a href="{{ project.url }}">
          {% if project.thumbnail %}
          <img src="{{ project.thumbnail }}" alt="{{ project.title }}" loading="lazy">
          {% else %}
          <span class="grid-card__placeholder grid-card__placeholder--{{ project.category }}">{{ project.subcategory | upcase | truncate: 4, "" }}</span>
          {% endif %}
        </a>
      </div>
      <div class="grid-card__info">
        <a href="{{ project.url }}" class="grid-card__title">{{ project.title }}</a>
        <div class="grid-card__meta">
          <span>{{ project.category | capitalize }}</span>
          <span>{{ project.date | date: "%Y" }}{% if project.end_date %}–{{ project.end_date | date: "%Y" }}{% endif %}</span>
        </div>
      </div>
    </article>
    {% endfor %}
  </div>
</div>

<script>
/* --- pe-text variable font animation -------------------- */
(function () {
  var peText = document.getElementById('pe-text');
  var autoW = 400, autoS = 0, autoSt = 100;
  var wDir = 1, sDir = 1, stDir = -1;
  var mInf = 0, mW = 400, mS = 0, mSt = 100;
  var W0 = 100, W1 = 800, S0 = 0, S1 = 12, ST0 = 20, ST1 = 100;

  document.addEventListener('mousemove', function (e) {
    mW  = Math.round((e.clientX / innerWidth)  * (W1  - W0)  + W0);
    mS  =            (e.clientY / innerHeight) * (S1  - S0)  + S0;
    mSt = Math.round((1 - e.clientY / innerHeight) * (ST1 - ST0) + ST0);
    mInf = 1;
  });

  function tick() {
    autoW  += 3  * wDir;  if (autoW  >= W1  || autoW  <= W0)  { wDir  *= -1; autoW  = Math.max(W0,  Math.min(W1,  autoW));  }
    autoS  += 0.8 * sDir; if (autoS  >= S1  || autoS  <= S0)  { sDir  *= -1; autoS  = Math.max(S0,  Math.min(S1,  autoS));  }
    autoSt += 2  * stDir; if (autoSt >= ST1 || autoSt <= ST0) { stDir *= -1; autoSt = Math.max(ST0, Math.min(ST1, autoSt)); }
    mInf = Math.max(0, mInf - 0.02);
    var fw  = Math.round(autoW  * (1 - mInf) + mW  * mInf);
    var fs  =            autoS  * (1 - mInf) + mS  * mInf;
    var fst = Math.round(autoSt * (1 - mInf) + mSt * mInf);
    peText.style.fontVariationSettings = "'wght' " + fw + ", 'slnt' " + fs + ", 'YOPQ' " + fst;
    requestAnimationFrame(tick);
  }
  tick();
}());

/* --- Bio typing reveal + collapse toggle ---------------- */
(function () {
  var SPEED = 12;

  var TEXT2 = 'Pathum specializes in Sinhala and Tamil script typography and South Asian visual cultures. Based in Colombo, Sri Lanka, his practice sits at the intersection of culture and technology, spanning typography, typeface design, archival research, language technology, and community building. ';
  var TEXT3 = 'He is co-founder and Managing Partner of Mooniak, a type foundry and typographic design studio pioneering Sinhala + Tamil multi-script fonts and maintaining a large collection of Free and Open Source font projects. He co-founded Akuru Collective, a community that led over 30 events including three major international typography conferences in Sri Lanka. He currently serves as the Chief Curator of the W A Silva Museum for Language, Literature and Typography in Colombo, working to preserve and make accessible Sri Lanka\u2019s language and typographic heritage. He teaches typography, talks about design and ponders about future of civilisation. ';

  var toggle = document.getElementById('bio-toggle');
  var more   = document.getElementById('bio-more');
  var nav    = document.getElementById('bio-nav');

  var typed = false;
  var open  = false;
  var busy  = false;

  function typeInto(el, text, onDone) {
    var node = document.createTextNode('');
    el.appendChild(node);
    var i = 0;
    var timer = setInterval(function () {
      node.nodeValue += text[i++];
      if (i >= text.length) { clearInterval(timer); if (onDone) onDone(); }
    }, SPEED);
  }

  function typeAll(onDone) {
    var p2 = document.createElement('p');
    p2.className = 'bio-text';
    more.appendChild(p2);
    typeInto(p2, TEXT2, function () {
      var p3 = document.createElement('p');
      p3.className = 'bio-text';
      more.appendChild(p3);
      typeInto(p3, TEXT3, function () {
        var mark = document.createElement('span');
        mark.className = 'bio-kundaliya';
        mark.textContent = ' \u0dba\u0dba\u0dba';
        p3.appendChild(mark);
        if (onDone) onDone();
      });
    });
  }

  toggle.addEventListener('click', function () {
    if (busy) return;

    if (open) {
      open = false;
      toggle.setAttribute('aria-expanded', 'false');
      more.style.display = 'none';
      nav.style.display  = 'none';
    } else {
      open = true;
      toggle.setAttribute('aria-expanded', 'true');
      more.style.display = '';
      if (!typed) {
        busy = true;
        typeAll(function () {
          typed = true;
          busy  = false;
          nav.style.display = '';
        });
      } else {
        nav.style.display = '';
      }
    }
  });
}());
</script>
