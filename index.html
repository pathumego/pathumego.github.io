---
layout: default
hide_nav: true
---

<div class="homepage">
  <div class="pe-text" id="pe-text">peපැபெ</div>

  <div class="bio">
    <p class="bio-text" id="bio-p">Pathum Egodawatta is an interdisciplinary designer, thinker, and catalyst working at the intersections of type, text, design, code, and culture. <button class="bio-trigger" id="bio-toggle" aria-expanded="false">෴෴෴</button><span id="bio-more"></span></p>
  </div>
</div>

{% assign all_projects = site.projects | sort: "date" | reverse %}

<div class="homepage-projects">
  <p class="homepage-projects__heading">Selected work | <a href="/work">View all work →</a></p> 
  <div class="projects-grid">
    {% for project in all_projects %}
    <article class="grid-card">
      <div class="grid-card__thumb">
        <a href="{{ project.url }}">
          {% if project.thumbnail %}
          <img src="{{ project.thumbnail }}" alt="{{ project.title }}" loading="lazy">
          {% else %}
          <span class="grid-card__placeholder grid-card__placeholder--{{ project.category }}">{{ project.subcategory | upcase | truncate: 4, "" }}</span>
          {% endif %}
        </a>
      </div>
      <div class="grid-card__info">
        <a href="{{ project.url }}" class="grid-card__title">{{ project.title }}</a>
        <div class="grid-card__meta">
          <span>{{ project.category | capitalize }}</span>
          <span>{{ project.date | date: "%Y" }}{% if project.end_date %}–{{ project.end_date | date: "%Y" }}{% endif %}</span>
        </div>
      </div>
    </article>
    {% endfor %}
  </div>
</div>

<script>
/* --- pe-text variable font animation -------------------- */
(function () {
  var peText = document.getElementById('pe-text');
  var autoW = 400, autoS = 0, autoSt = 100;
  var wDir = 1, sDir = 1, stDir = -1;
  var mInf = 0, mW = 400, mS = 0, mSt = 100;
  var W0 = 100, W1 = 800, S0 = 0, S1 = 12, ST0 = 20, ST1 = 100;

  document.addEventListener('mousemove', function (e) {
    mW  = Math.round((e.clientX / innerWidth)  * (W1  - W0)  + W0);
    mS  =            (e.clientY / innerHeight) * (S1  - S0)  + S0;
    mSt = Math.round((1 - e.clientY / innerHeight) * (ST1 - ST0) + ST0);
    mInf = 1;
  });

  function tick() {
    autoW  += 3  * wDir;  if (autoW  >= W1  || autoW  <= W0)  { wDir  *= -1; autoW  = Math.max(W0,  Math.min(W1,  autoW));  }
    autoS  += 0.8 * sDir; if (autoS  >= S1  || autoS  <= S0)  { sDir  *= -1; autoS  = Math.max(S0,  Math.min(S1,  autoS));  }
    autoSt += 2  * stDir; if (autoSt >= ST1 || autoSt <= ST0) { stDir *= -1; autoSt = Math.max(ST0, Math.min(ST1, autoSt)); }
    mInf = Math.max(0, mInf - 0.02);
    var fw  = Math.round(autoW  * (1 - mInf) + mW  * mInf);
    var fs  =            autoS  * (1 - mInf) + mS  * mInf;
    var fst = Math.round(autoSt * (1 - mInf) + mSt * mInf);
    peText.style.fontVariationSettings = "'wght' " + fw + ", 'slnt' " + fs + ", 'YOPQ' " + fst;
    requestAnimationFrame(tick);
  }
  tick();
}());

/* --- Bio typing reveal + collapse toggle ---------------- */
(function () {
  var SPEED = 12;
  var ERASE = 4;

  var TEXT2 = 'Pathum specializes in Sinhala and Tamil script typography and South Asian visual cultures. Based in Colombo, Sri Lanka, his practice sits at the intersection of culture and technology, spanning typography, typeface design, archival research, language technology, and community building. ';
  var TEXT3 = 'He is co-founder and Managing Partner of Mooniak, a type foundry and typographic design studio pioneering Sinhala + Tamil multi-script fonts and maintaining a large collection of Free and Open Source font projects. He co-founded Akuru Collective, a community that led over 30 events including three major international typography conferences in Sri Lanka. He currently serves as the Chief Curator of the W A Silva Museum for Language, Literature and Typography in Colombo, working to preserve and make accessible Sri Lanka\u2019s language and typographic heritage. He teaches typography, talks about design and ponders about future of civilisation. ';

  var bioP    = document.getElementById('bio-p');
  var toggle1 = document.getElementById('bio-toggle');
  var more    = document.getElementById('bio-more');

  /* Split the first text node at "Pathum Egodawatta" (17 chars).
     node1 = " is an interdisciplinary...culture. " — visible by default,
     only erased during collapse. */
  var node1 = bioP.firstChild.splitText(17);

  var busy  = false;
  var state = 0;
  var node2, node3, btn2ref, btn3ref;

  /* Create a text node in more just before cursorEl and type into it. */
  function typeBefore(text, cursorEl, onDone) {
    var node = document.createTextNode('');
    more.insertBefore(node, cursorEl);
    var i = 0;
    var timer = setInterval(function () {
      node.nodeValue += text[i++];
      if (i >= text.length) { clearInterval(timer); if (onDone) onDone(); }
    }, SPEED);
    return node;
  }

  function eraseNode(node, onDone) {
    var timer = setInterval(function () {
      if (node.nodeValue.length > 0) {
        node.nodeValue = node.nodeValue.slice(0, -1);
      } else {
        clearInterval(timer);
        if (onDone) onDone();
      }
    }, ERASE);
  }

  /* Collapse: erase TEXT3 → remove btn3/btn2 → erase TEXT2 →
     erase node1 (" is an...culture. ") → only "Pathum Egodawatta ෴෴෴" remains. */
  function collapse() {
    busy = true;
    eraseNode(node3, function () {
      btn3ref.remove();
      btn2ref.remove();
      eraseNode(node2, function () {
        more.innerHTML = '';
        eraseNode(node1, function () {
          state            = 0;
          busy             = false;
          toggle1.disabled = false;
          toggle1.setAttribute('aria-expanded', 'false');
        });
      });
    });
  }

  toggle1.addEventListener('click', function () {
    if (busy || state !== 0) return;
    busy  = true;
    state = 1;
    toggle1.setAttribute('aria-expanded', 'true');
    toggle1.disabled = true;

    btn2ref = document.createElement('button');
    btn2ref.className   = 'bio-trigger bio-trigger--cursor';
    btn2ref.textContent = '\u0DF4\u0DF4';
    btn2ref.disabled    = true;
    btn2ref.setAttribute('aria-label', 'Read more');
    more.appendChild(btn2ref);

    node2 = typeBefore(TEXT2, btn2ref, function () {
      btn2ref.classList.remove('bio-trigger--cursor');
      btn2ref.disabled = false;
      busy = false;
    });

    btn2ref.addEventListener('click', function () {
      if (busy || state !== 1) return;
      busy  = true;
      state = 2;
      btn2ref.disabled = true;

      btn3ref = document.createElement('button');
      btn3ref.className   = 'bio-trigger bio-trigger--cursor';
      btn3ref.textContent = '\u0DF4';
      btn3ref.disabled    = true;
      btn3ref.setAttribute('aria-label', 'Collapse bio');
      more.appendChild(btn3ref);

      node3 = typeBefore(TEXT3, btn3ref, function () {
        btn3ref.classList.remove('bio-trigger--cursor');
        btn3ref.disabled = false;
        busy = false;
      });

      btn3ref.addEventListener('click', function () { collapse(); });
    });
  });
}());
</script>
